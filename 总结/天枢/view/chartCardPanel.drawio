<mxfile>
    <diagram id="k05bKzZFLF8Zm9DCPvuP" name="第 1 页">
        <mxGraphModel dx="1106" dy="802" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="3300" pageHeight="2339" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="2" target="3" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="2" target="7" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="2" target="32">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="2" target="34">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="2" value="chartCardPanel" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="350" y="240" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="3" value="mounted&lt;br&gt;计算容器的高度宽度" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="590" y="20" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="5" target="2" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="5" value="props:{&lt;br&gt;eventChartData(接口返回的事件配置和数据),&lt;br&gt;loadStatus,&lt;br&gt;}" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="30" y="230" width="250" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="7" target="9" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="7" target="12" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="7" value="@Watch('eventChartData')() {&lt;br&gt;loading为false,&lt;br&gt;设置chartType,&lt;br&gt;调用mergeDimension合并维度&lt;br&gt;设置chartOptionList=parseChartOptions&lt;br&gt;}" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="590" y="140" width="230" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="9" value="mergeDimension{&lt;br&gt;合并维度&lt;br&gt;}" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="960" y="110" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="12" target="14" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="12" value="parseChartOptions(this.evetData, mergeDimension){&lt;br&gt;获取vskey,&lt;br&gt;getCChartOptio格式化图表配置&lt;br&gt;}" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="960" y="200" width="200" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="14" target="16" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="14" target="20">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="14" value="getChartOptions{&lt;br&gt;getLenged获取图例信息;&lt;br&gt;判断data的元素有没有chainRatio(环比)或者sameDayRatio(同比);&lt;br&gt;返回eventData.indicator.map&lt;br&gt;}" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1260" y="171" width="190" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="16" target="19">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1880" y="150.5" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="16" value="getLenged(eventData){&lt;br&gt;eventData.data.forEach{&lt;br&gt;调用getLabel获取label&lt;br&gt;判断如果lenged中不存在则添加&lt;br&gt;}&lt;br&gt;}" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1590" y="101" width="220" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="19" value="getLabel(data, dimension){&lt;br&gt;dimension.reduce{&lt;br&gt;[data[dimension]&lt;br&gt;]&lt;br&gt;}.join('-')&lt;br&gt;}&lt;br&gt;将data中的维度字段用“-”拼接起来" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1880" y="81" width="170" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="20" target="23">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="20" target="26">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="20" target="28">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="2180" y="641" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="20" value="indicator.map(ind){&lt;br&gt;在data.column中找到ind，获取ind指标的中文label&lt;br&gt;赋值yData如果有合并维度&lt;br&gt;没有则:eventData.dates存在labelList进行循环parseData，不存在parseSumData&lt;br&gt;yLabel=[label]&lt;br&gt;判断ind是否在data.sameDayRatio且sameDayRatio===true，&lt;br&gt;是则调用getRatioData增加y轴名称同理处理chainRatio&lt;br&gt;同环比将type!='line'的数据全部设置为bar&lt;br&gt;设置chart的名称&lt;br&gt;返回{legend,xData,yData,yLabel,title,isPercent}&lt;br&gt;}" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1590" y="341" width="440" height="180" as="geometry"/>
                </mxCell>
                <mxCell id="23" value="paseData(evenntData,indicator,label,legend){&lt;br&gt;eventData.dates.map(date){&lt;br&gt;在eventData.data中找到日期或者label一致的数据&lt;br&gt;查看当前外循环的ind指标是否在数据中&lt;br&gt;在则将百分号去掉返回number类型&lt;br&gt;不在则默认为0&lt;br&gt;}&lt;br&gt;}" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="2230" y="111" width="290" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="26" value="parseSumData(eventData, indicator,labelList){&lt;br&gt;感觉是无用代码&lt;br&gt;}" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="2230" y="371" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="28" target="30">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="28" value="getRatio(同比还是环比){&lt;br&gt;yLabel.push('同比'||'环比')&lt;br&gt;外层的labelList进行map(label){&lt;br&gt;名称拼接ratio&lt;br&gt;调用parseRatio获取数据&lt;br&gt;判断legend是否为空，空即未选择任何维度&lt;br&gt;则将指标名称作为图例名称&lt;br&gt;}获的yRatioData&lt;br&gt;yData.push(yRatioData);&lt;br&gt;}" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="2230" y="581" width="310" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="30" value="parseRatio(eventData,indicator,label,legend,ratioType){&lt;br&gt;在eventData.data中找到日期或者label一致的数据&lt;br&gt;查看当前外循环的ind指标是否在数据中&lt;br&gt;查看ratio是否在数据中&lt;br&gt;查看ind指标是否在数据[ratio]中&lt;br&gt;在则将数据[raio][ind]*100取toFixed&lt;br&gt;不在则默认为0&lt;br&gt;}" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="2630" y="591" width="300" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="32" value="@Watch('realDate','realFilter') deep {&lt;br&gt;this.loaderindex+=1&lt;br&gt;}" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="590" y="320" width="230" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="34" target="38">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="940" y="530" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="34" value="props{&lt;br&gt;columns,tableData,&lt;br&gt;getAllIndicatorHandler,handler,&lt;br&gt;on-sort-change@emit('colSortChange')&lt;br&gt;}" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="590" y="491" width="230" height="79" as="geometry"/>
                </mxCell>
                <mxCell id="41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="38" target="40">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="38" value="tsTable" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="890" y="500.5" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="40" value="emit@colSortChange(){&lt;br&gt;reloadData&lt;br&gt;}" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1100" y="470" width="180" height="122" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>